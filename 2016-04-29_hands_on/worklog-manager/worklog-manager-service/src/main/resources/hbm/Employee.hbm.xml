<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="at.fh.ooe.swt6.worklog.manager.model.jpa">

    <class name="Employee" discriminator-value="E">
        <id name="id" type="java.lang.Long" access="field">
            <generator class="native"/>
        </id>
        <discriminator column="discriminator" type="java.lang.String"/>

        <property name="creationDate" type="java.util.Calendar" not-null="true" access="field"/>
        <property name="modificationDate" type="java.util.Calendar" not-null="true" access="field"/>
        <property name="version" type="java.lang.Long" not-null="true" access="field"/>

        <property name="firstName" type="java.lang.String" not-null="true" access="field"/>
        <property name="lastName" type="java.lang.String" not-null="true" access="field"/>
        <property name="dateOfBirth" type="java.util.Calendar" not-null="true" access="field"/>

        <set name="logbookEntries" inverse="true" fetch="join" lazy="true"
             cascade="all">
            <key column="employee_id" not-null="true"/>
            <one-to-many class="LogBookEntry"/>
        </set>

        <component name="address" class="Address">
            <property name="zipCode" type="java.lang.String" not-null="true" access="field"/>
            <property name="city" type="java.lang.String" not-null="true" access="field"/>
            <property name="street" type="java.lang.String" not-null="true" access="field"/>
        </component>

        <joined-subclass name="PermanentEmployee">
            <key column="id"/>
            <!--<subclass name="PermanentEmployee" discriminator-value="P">-->
            <!--<union-subclass name="TemporaryEmployee">-->
            <property name="salary" type="java.math.BigDecimal" precision="12" scale="2" not-null="true"
                      access="field"/>
            <!--</union-subclass>-->
            <!--</subclass>-->
        </joined-subclass>

        <joined-subclass name="TemporaryEmployee">
            <key column="id"/>
            <!--<subclass name="TemporaryEmployee" discriminator-value="T">-->
            <!--<union-subclass name="TemporaryEmployee">-->
            <property name="hourlyRate" type="java.math.BigDecimal" precision="12" scale="2" not-null="true"
                      access="field"/>
            <property name="renter" type="java.lang.Boolean" length="1" not-null="true" access="field"/>
            <property name="startDate" type="java.util.Calendar" not-null="true" access="field"/>
            <property name="endDate" type="java.util.Calendar" not-null="false" access="field"/>
            <!--</union-subclass>-->
            <!--</subclass>-->
        </joined-subclass>
    </class>
</hibernate-mapping>
